otrs:
  build: otrs
  restart: always
  ports:
  - "80:80"
  - "443:443"
  - "25:25"
  
  hostname: helpdesk
  domainname: eionet.europa.eu

  links:
  - mariadb:mariadb
  - postfix:postfix

#  - memory_limit=35000

  volumes:
  - /backups:/backups
#  - /mnt/otrsData/ArticleStorageFS:/opt/otrs/var/article
  - /home/michimau/otrsData/ArticleStorageFS:/opt/otrs/var/article
  - /etc/localtime:/etc/localtime:ro

  environment:
    OTRS_DB_PASSWORD: changeme
    OTRS_ROOT_PASSWORD: changeme
    LDAP_HOST: changeme
    LDAP_PASSWORD: changeme
    #MTP_RELAY to match what you have defined in the Dockerfile of Postfix
    MTP_RELAY: ironports.eea.europa.eu
    MAIL_ADDRESSES: @helpdesk.eionet.europa.eu helpdesk@eionet.europa.eu

    SERVER_NAME: changeme 

    SSL_KEY: |-
        -----BEGIN RSA PRIVATE KEY-----
        changemechangemechangemechangemechangemechangemechangemechangeme
        changemechangemechangemechangemechangemechangemechangemechangeme
        changemechangemechangemechangemechangemechangemechangemechangeme
        changemechangemechangemechangemechangemechangemechangemechangeme
        -----END RSA PRIVATE KEY-----

    SSL_CERT: |-
        -----BEGIN CERTIFICATE-----
        changemechangemechangemechangemechangemechangemechangemechangeme
        changemechangemechangemechangemechangemechangemechangemechangeme
        changemechangemechangemechangemechangemechangemechangemechangeme
        changemechangemechangemechangemechangemechangemechangemechangeme
        -----END CERTIFICATE-----

    AUTH_CERT: |-
        -----BEGIN CERTIFICATE-----
        changemechangemechangemechangemechangemechangemechangemechangeme
        changemechangemechangemechangemechangemechangemechangemechangeme
        changemechangemechangemechangemechangemechangemechangemechangeme
        changemechangemechangemechangemechangemechangemechangemechangeme
        -----END CERTIFICATE-----

mariadb:
  restart: always
  build: mariadb
  expose:
  - "3306"
  volumes_from:
    - otrs_data
  volumes:
#  - /mnt/otrsData/mysql:/var/lib/mysql
  #to stransfer files, remove :ro for backup purposes
  - /backups:/backups:ro
  - /etc/localtime:/etc/localtime:ro

  environment:
    MYSQL_ROOT_PASSWORD: changme

postfix:
  restart: always
  image: eeacms/postfix:eionet
  volumes:
  - /etc/localtime:/etc/localtime:ro

  environment:
    MTP_USER: changeme
    MTP_PASS: changeme
